<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>Testing with Therie</title>
<link rel="stylesheet" type="text/css" href="public/doodle.css">
<script type="text/javascript" src="public/jquery.js"></script><script type="text/javascript" src="public/jquery.hotkeys.js"></script><script type="text/javascript" src="public/tags.js"></script><script type="text/javascript" src="public/main.js"></script><link rel="stylesheet" type="text/css" href="public/highlight.css">
</head>
<body>
<div id="main"><div id="content"><div class="section">
<h1 class="section_header">Testing with Therie</h1>
<p>Therie is a small and simple behavioral-style testing suite that comes with Atomy. To use it, you should use the <code><span class="n">therie</span></code> namespace, which provides the following methods.</p>
<pre class="highlight"><span class="n">use</span><span class="p">(</span><span class="n">therie</span><span class="p">)</span></pre>
<div id="definition_Stats" class="definition">
<pre class="thumb"><span class="no">Stats</span> <span class="definition_result_arrow">&rArr;</span> <span class="no">Class</span></pre>
<p>A trivial container of <code><span class="n">passed</span></code> and <code><span class="n">failed</span></code> counts, with accessors   for both.</p>
</div>
<div class="section" id="section_structure">
<h2 class="section_header">Structure</h2>
<div id="definition_theorize" class="definition">
<pre class="thumb"><span class="n"><a href="structure.html#definition_theorize">theorize</a></span><span class="p">(</span><span class="o">&amp;</span><span class="n">tests</span><span class="p">)</span> <span class="definition_result_arrow">&rArr;</span> <span class="no">Stats</span></pre>
<p>Run <code><span class="n">tests</span></code> and keep track of how many passed and how many failed,     printing the stats at the end and returning them.</p>
<div class="example">
<p><em>Example:</em></p>
<pre class="interaction"><span class="caret">&gt; </span><span class="n"><a href="structure.html#definition_theorize">theorize</a></span><span class="o">:</span><span class="t"> </span><span class="n"><a href="structure.html#definition_describe">describe</a></span><span class="p">(</span><span class="s">"</span><span class="s">foo</span><span class="s">"</span><span class="p">)</span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="n"><a href="structure.html#definition_it">it</a></span><span class="p">(</span><span class="s">"</span><span class="s">does x</span><span class="s">"</span><span class="p">)</span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="t"> </span><span class="p">}</span><span class="p">,</span><span class="t"> </span><span class="n"><a href="structure.html#definition_it">it</a></span><span class="p">(</span><span class="s">"</span><span class="s">does x</span><span class="s">"</span><span class="p">)</span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="p">}</span><span class="t">
</span>- foo
  &#10007; does x
    ` RuntimeError: expected false, got true
      /Users/Alex/Projects/atomy/kernel/therie:134:in `therie_ns_should_be'
      /Users/Alex/Projects/atomy/lib/namespace.rb:198:in `atomy_send (send)'
      (eval):1:in `send'
      /Users/Alex/Projects/atomy/lib/namespace.rb:207:in `atomy_send (send)'
      /Users/Alex/Projects/atomy/kernel/therie:89:in `therie_ns_it'
  &#10003; does x

total of 2 tests (1 passed, 1 failed)
<span class="no">Stats</span><span class="p">(</span><span class="vi">@passed</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="vi">@failed</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="mi">1</span><span class="p">)</span>
</pre>
</div>
</div>
<div id="definition_describe" class="definition">
<pre class="thumb"><span class="n"><a href="structure.html#definition_describe">describe</a></span><span class="p">(</span><span class="n">what</span><span class="p">,</span><span class="t"> </span><span class="o">&amp;</span><span class="n">body</span><span class="p">)</span> </pre>
<p>Logically group together a set of behavior.</p>
<p>Prints out <code><span class="n">what</span></code>, with each test in <code><span class="n">body</span></code> indented afterward.</p>
<div class="example">
<p><em>Example:</em></p>
<pre class="interaction"><span class="caret">&gt; </span><span class="n"><a href="structure.html#definition_describe">describe</a></span><span class="p">(</span><span class="s">"</span><span class="s">foo</span><span class="s">"</span><span class="p">)</span><span class="o">:</span><span class="t"> </span><span class="n"><a href="structure.html#definition_it">it</a></span><span class="p">(</span><span class="s">"</span><span class="s">does x</span><span class="s">"</span><span class="p">)</span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="t"> </span><span class="p">}</span><span class="p">,</span><span class="t"> </span><span class="n"><a href="structure.html#definition_it">it</a></span><span class="p">(</span><span class="s">"</span><span class="s">does x</span><span class="s">"</span><span class="p">)</span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="t"> </span><span class="p">}</span><span class="t">
</span>- foo
  &#10007; does x
    ` RuntimeError: expected false, got true
      /Users/Alex/Projects/atomy/kernel/therie:134:in `therie_ns_should_be'
      /Users/Alex/Projects/atomy/lib/namespace.rb:198:in `atomy_send (send)'
      (eval):1:in `send'
      /Users/Alex/Projects/atomy/lib/namespace.rb:207:in `atomy_send (send)'
      /Users/Alex/Projects/atomy/kernel/therie:89:in `therie_ns_it'
  &#10003; does x
<span class="kc">nil</span>
</pre>
</div>
</div>
<div id="definition_it" class="definition">
<pre class="thumb"><span class="n"><a href="structure.html#definition_it">it</a></span><span class="p">(</span><span class="n">description</span><span class="p">,</span><span class="t"> </span><span class="o">&amp;</span><span class="n">tests</span><span class="p">)</span> </pre>
<p>Describe some behavior that the tests in <code><span class="n">body</span></code> will demonstrate.</p>
<div class="example">
<p><em>Example:</em></p>
<pre class="interaction"><span class="caret">&gt; </span><span class="n"><a href="structure.html#definition_it">it</a></span><span class="p">(</span><span class="s">"</span><span class="s">adds correctly</span><span class="s">"</span><span class="p">)</span><span class="o">:</span><span class="t"> </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="t">
</span>&#10003; adds correctly
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="n"><a href="structure.html#definition_it">it</a></span><span class="p">(</span><span class="s">"</span><span class="s">adds correctly</span><span class="s">"</span><span class="p">)</span><span class="o">:</span><span class="t"> </span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="t">
</span>&#10007; adds correctly
  ` RuntimeError: expected 4, got 3
    /Users/Alex/Projects/atomy/kernel/therie:134:in `therie_ns_should_be'
    /Users/Alex/Projects/atomy/lib/namespace.rb:198:in `atomy_send (send)'
    (eval):1:in `send'
    /Users/Alex/Projects/atomy/lib/namespace.rb:207:in `atomy_send (send)'
    /Users/Alex/Projects/atomy/kernel/therie:89:in `therie_ns_it'
<span class="kc">nil</span>
</pre>
</div>
</div>
</div>
<div class="section" id="section_tests">
<h2 class="section_header">Tests</h2>
<div id="definition_should" class="definition">
<pre class="thumb"><span class="n">o</span><span class="t"> </span><span class="n"><a href="tests.html#definition_should">should</a></span><span class="p">(</span><span class="o">&amp;</span><span class="n">check</span><span class="p">)</span> </pre>
<p>Test that <code><span class="n">predicate</span></code> is satisified by <code><span class="n">o</span></code> by evaluating it with     <code><span class="n">o</span></code> as <code><span class="kr">self</span></code>.</p>
<div class="example">
<p><em>Example:</em></p>
<pre class="interaction"><span class="caret">&gt; </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="tests.html#definition_should">should</a></span><span class="o">:</span><span class="t"> </span><span class="n">even?</span><span class="t">
</span><span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="tests.html#definition_should">should</a></span><span class="o">:</span><span class="t"> </span><span class="n">odd?</span><span class="t">
</span><span class="gr">ERROR: assertion failed for 4</span>
</pre>
</div>
</div>
<div id="definition_should_be" class="definition">
<pre class="thumb"><span class="n">x</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> </pre>
<p>Test for <code><span class="n">x</span><span class="t"> </span><span class="o">=</span><span class="o">=</span><span class="t"> </span><span class="n">y</span></code>.</p>
<div class="example">
<p><em>Example:</em></p>
<pre class="interaction"><span class="caret">&gt; </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="t">
</span><span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n">should-be</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="t">
</span><span class="gr">ERROR: expected 4, got 3</span>
</pre>
</div>
</div>
<div id="definition_should_raise" class="definition">
<pre class="thumb"><span class="n">x</span><span class="t"> </span><span class="n">should-raise</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> 
  | <span class="n">x</span><span class="t"> </span><span class="n">respond-to?</span><span class="p">(</span><span class="ss">#call</span><span class="p">)</span>
  | <span class="n">y</span><span class="t"> </span><span class="n">is-a?</span><span class="p">(</span><span class="no">Class</span><span class="p">)</span></pre>
<p>Test that executing <code><span class="n">x</span></code> will raise an exception of class <code><span class="n">y</span></code>.</p>
<div class="example">
<p><em>Example:</em></p>
<pre class="interaction"><span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="n">abc</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">should-raise</span><span class="p">(</span><span class="no">NoMethodError</span><span class="p">)</span><span class="t">
</span><span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="ss">#ok</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">should-raise</span><span class="p">(</span><span class="no">NoMethodError</span><span class="p">)</span><span class="t">
</span><span class="gr">ERROR: #should-raise - no exception raised</span>
</pre>
</div>
</div>
<div id="definition_should_error" class="definition">
<pre class="thumb"><span class="n">x</span><span class="t"> </span><span class="n">should-error</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> 
  | <span class="n">x</span><span class="t"> </span><span class="n">respond-to?</span><span class="p">(</span><span class="ss">#call</span><span class="p">)</span>
  | <span class="n">y</span><span class="t"> </span><span class="n">is-a?</span><span class="p">(</span><span class="no">Class</span><span class="p">)</span></pre>
<p>Test that executing <code><span class="n">x</span></code> will signal an error of class <code><span class="n">y</span></code>.</p>
<div class="example">
<p><em>Example:</em></p>
<pre class="interaction"><span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="n">error</span><span class="p">(</span><span class="ss">#foo</span><span class="p">)</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">should-error</span><span class="p">(</span><span class="no">SimpleError</span><span class="p">)</span><span class="t">
</span><span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="ss">#ok</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">should-error</span><span class="p">(</span><span class="no">SimpleError</span><span class="p">)</span><span class="t">
</span><span class="gr">ERROR: #should-error - no error signaled</span>
</pre>
</div>
</div>
</div>
</div></div></div>
<div class="search">
<form action="javascript:void(0)"><input autocomplete="off" type="text" placeholder="Search&hellip;" id="search"></form>
<ul class="search_results"></ul>
</div>
<div id="sidebar">
<h4>On this page:</h4>
<ol class="toc">
<li><a href="testing-with-therie.html#section_structure">Structure</a></li>
<li><a href="testing-with-therie.html#section_tests">Tests</a></li>
</ol>
<h4>Up one level:</h4>
<ol class="toc"><li>
<a href="reference.html">Reference</a><ol>
<li>
<a href="concurrency.html">Concurrency</a><ol>
<li><a href="concurrency.html#section_sending-and-receiving">Sending &amp; Receiving</a></li>
<li><a href="concurrency.html#section_spawning">Spawning</a></li>
</ol>
</li>
<li>
<a href="condition-system.html">Condition System</a><ol>
<li><a href="condition-system.html#section_conditions">Conditions</a></li>
<li><a href="condition-system.html#section_handling">Handling</a></li>
<li><a href="condition-system.html#section_signalling">Signalling</a></li>
<li><a href="condition-system.html#section_debuggers">Debuggers</a></li>
</ol>
</li>
<li>
<a href="pretty-printing.html">Pretty-Printing</a><ol>
<li><a href="pretty-printing.html#section_documents">Documents</a></li>
<li><a href="pretty-printing.html#section_constructing">Constructing</a></li>
<li>
<a href="pretty-printing.html#section_helpers">Helpers</a><ol>
<li><a href="pretty-printing.html#section_shortcuts">Shortcuts</a></li>
<li><a href="pretty-printing.html#section_wrapping">Wrapping</a></li>
<li><a href="pretty-printing.html#section_combining">Combining</a></li>
</ol>
</li>
</ol>
</li>
<li>
<a href="input-and-output.html">Input &amp; Output</a><ol>
<li><a href="input-and-output.html#section_output">Output</a></li>
<li><a href="input-and-output.html#section_input">Input</a></li>
</ol>
</li>
<li><a href="the-repl.html">The REPL</a></li>
<li>
<a href="testing-with-therie.html">Testing with Therie</a><ol>
<li><a href="testing-with-therie.html#section_structure">Structure</a></li>
<li><a href="testing-with-therie.html#section_tests">Tests</a></li>
</ol>
</li>
</ol>
</li></ol>
</div>
</body>
</html>
